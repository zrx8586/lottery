# 环境配置说明文档

## 📁 配置文件结构

```
src/main/resources/
├── application.properties          # 主配置文件（通用配置）
├── application-dev.properties     # 开发环境配置
└── application-prod.properties    # 生产环境配置
```

## 🔄 环境切换方法

### 方法1：使用脚本切换（推荐）

#### Windows系统：
```bash
# 切换到开发环境
switch-to-dev.bat

# 切换到生产环境
switch-to-prod.bat
```

#### Linux/Mac系统：
```bash
# 给脚本添加执行权限
chmod +x switch-to-dev.sh
chmod +x switch-to-prod.sh

# 切换到开发环境
./switch-to-dev.sh

# 切换到生产环境
./switch-to-prod.sh
```

### 方法2：手动修改配置文件

编辑 `src/main/resources/application.properties` 文件，修改以下行：

```properties
# 开发环境
spring.profiles.active=dev

# 生产环境
spring.profiles.active=prod
```

### 方法3：启动时指定环境

```bash
# 开发环境
java -jar your-app.jar --spring.profiles.active=dev

# 生产环境
java -jar your-app.jar --spring.profiles.active=prod
```

## ⚙️ 环境配置差异

### 🖥️ 开发环境 (dev)
- **日志级别**: DEBUG（详细调试信息）
- **数据库**: 本地localhost
- **Redis**: 本地localhost
- **SQL显示**: 开启（显示执行的SQL语句）
- **跨域**: 允许本地开发端口
- **性能**: 基础配置

### 🚀 生产环境 (prod)
- **日志级别**: WARN/INFO（减少日志输出）
- **数据库**: 服务器配置
- **Redis**: 服务器配置
- **SQL显示**: 关闭（提高性能）
- **跨域**: 限制特定域名
- **性能**: 优化配置（连接池、缓存等）

## 🔧 自定义配置

### 添加新的环境配置

1. 创建新的配置文件：`application-test.properties`
2. 在主配置文件中添加环境选项
3. 创建对应的切换脚本

### 修改特定环境配置

直接编辑对应的环境配置文件：
- `application-dev.properties` - 开发环境
- `application-prod.properties` - 生产环境

## 📋 部署检查清单

### 开发环境部署前：
- [ ] 确认 `spring.profiles.active=dev`
- [ ] 检查本地数据库连接
- [ ] 检查本地Redis连接
- [ ] 确认日志级别为DEBUG

### 生产环境部署前：
- [ ] 确认 `spring.profiles.active=prod`
- [ ] 检查服务器数据库连接
- [ ] 检查服务器Redis连接
- [ ] 确认日志级别为WARN/INFO
- [ ] 检查跨域配置（限制域名）
- [ ] 确认性能优化配置

## 🚨 注意事项

1. **环境切换后必须重启应用**，配置才会生效
2. **生产环境不要使用DEBUG日志级别**，会影响性能
3. **跨域配置要限制在生产环境的实际域名**
4. **数据库密码等敏感信息**建议使用环境变量或加密配置
5. **定期备份配置文件**，避免配置丢失

## 🔍 故障排除

### 常见问题：

1. **配置不生效**
   - 检查环境配置文件是否存在
   - 确认主配置文件中的环境设置
   - 重启应用程序

2. **数据库连接失败**
   - 检查对应环境的数据库配置
   - 确认数据库服务是否运行
   - 检查网络连接

3. **Redis连接失败**
   - 检查对应环境的Redis配置
   - 确认Redis服务是否运行
   - 检查密码配置

4. **跨域问题**
   - 检查对应环境的跨域配置
   - 确认前端域名是否在允许列表中
