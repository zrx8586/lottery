(()=>{var t={5358:(t,e,i)=>{var a={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function s(t){var e=l(t);return i(e)}function l(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=l,t.exports=s,s.id=5358},8220:(t,e,i)=>{"use strict";var a=i(3751),s=i(641);const l={id:"app"};function r(t,e,i,a,r,n){const c=(0,s.g2)("router-link"),o=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("nav",null,[(0,s.bF)(c,{to:"/activity"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)("活动管理")]))),_:1}),(0,s.bF)(c,{to:"/prizes"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)("奖品管理")]))),_:1}),(0,s.bF)(c,{to:"/activityPrizeRelationship"},{default:(0,s.k6)((()=>e[2]||(e[2]=[(0,s.eW)("活动奖品关系")]))),_:1}),(0,s.bF)(c,{to:"/cache"},{default:(0,s.k6)((()=>e[3]||(e[3]=[(0,s.eW)("缓存管理")]))),_:1})]),(0,s.bF)(o)])}const n={name:"App"};var c=i(6262);const o=(0,c.A)(n,[["render",r]]),u=o;var d=i(5220),v=i(33);const m={class:"activity-management"},p={class:"action-bar"},h={class:"activity-list-container"},k={class:"activity-table"},y=["onClick"],b=["onClick"],L=["onClick"],f={class:"pagination"},g=["disabled"],z=["disabled"],j={key:0,class:"modal"},D={class:"modal-content"},P={class:"form-group"},A=["readonly"],C={class:"form-group"},w=["readonly"],_={class:"form-group"},I=["readonly"],F={class:"form-group"},E=["readonly"],N={key:0,type:"submit",class:"btn btn-submit"},V={key:1};function X(t,e,i,l,r,n){return(0,s.uX)(),(0,s.CE)("div",m,[e[19]||(e[19]=(0,s.Lk)("h1",null,"活动管理",-1)),(0,s.Lk)("div",p,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.searchQuery=t),placeholder:"搜索活动名称...",class:"search-input"},null,512),[[a.Jo,r.searchQuery]]),(0,s.Lk)("button",{class:"btn btn-create",onClick:e[1]||(e[1]=t=>r.showCreateForm=!0)},"创建新活动")]),(0,s.Lk)("div",h,[(0,s.Lk)("table",k,[e[10]||(e[10]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"活动名称"),(0,s.Lk)("th",null,"活动描述"),(0,s.Lk)("th",null,"开始时间"),(0,s.Lk)("th",null,"结束时间"),(0,s.Lk)("th",null,"操作")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.paginatedActivities,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.activityId},[(0,s.Lk)("td",null,(0,v.v_)(t.activityName),1),(0,s.Lk)("td",null,(0,v.v_)(t.activityDesc),1),(0,s.Lk)("td",null,(0,v.v_)(n.formatDate(t.startDate)),1),(0,s.Lk)("td",null,(0,v.v_)(n.formatDate(t.endDate)),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-view",onClick:e=>n.viewActivity(t)},"查看活动",8,y),(0,s.Lk)("button",{class:"btn btn-edit",onClick:e=>n.editActivity(t)},"编辑",8,b),(0,s.Lk)("button",{class:"btn btn-delete",onClick:e=>n.deleteActivity(t.activityId)},"删除",8,L)])])))),128))])]),(0,s.Lk)("div",f,[(0,s.Lk)("button",{disabled:1===r.currentPage,onClick:e[2]||(e[2]=t=>r.currentPage--),class:"btn btn-pagination"},"上一页",8,g),(0,s.Lk)("span",null,"第 "+(0,v.v_)(r.currentPage)+" 页 / 共 "+(0,v.v_)(n.totalPages)+" 页",1),(0,s.Lk)("button",{disabled:r.currentPage===n.totalPages,onClick:e[3]||(e[3]=t=>r.currentPage++),class:"btn btn-pagination"},"下一页",8,z)])]),r.showCreateForm||r.editingActivity||r.viewingActivity?((0,s.uX)(),(0,s.CE)("div",j,[(0,s.Lk)("div",D,[(0,s.Lk)("span",{class:"close",onClick:e[4]||(e[4]=(...t)=>n.closeForm&&n.closeForm(...t))},"×"),(0,s.Lk)("h2",null,(0,v.v_)(r.viewingActivity?"查看活动":r.editingActivity?"编辑活动":"创建新活动"),1),r.viewingActivity?((0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("p",null,[e[15]||(e[15]=(0,s.Lk)("strong",null,"活动名称:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.activityName),1)]),(0,s.Lk)("p",null,[e[16]||(e[16]=(0,s.Lk)("strong",null,"活动描述:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.activityDesc),1)]),(0,s.Lk)("p",null,[e[17]||(e[17]=(0,s.Lk)("strong",null,"开始时间:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.startDate),1)]),(0,s.Lk)("p",null,[e[18]||(e[18]=(0,s.Lk)("strong",null,"结束时间:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.endDate),1)])])):((0,s.uX)(),(0,s.CE)("form",{key:0,onSubmit:e[9]||(e[9]=(0,a.D$)(((...t)=>n.submitForm&&n.submitForm(...t)),["prevent"]))},[(0,s.Lk)("div",P,[e[11]||(e[11]=(0,s.Lk)("label",null,"活动名称:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>r.formData.activityName=t),readonly:r.viewingActivity,required:""},null,8,A),[[a.Jo,r.formData.activityName]])]),(0,s.Lk)("div",C,[e[12]||(e[12]=(0,s.Lk)("label",null,"活动描述:",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.formData.activityDesc=t),readonly:r.viewingActivity,required:""},null,8,w),[[a.Jo,r.formData.activityDesc]])]),(0,s.Lk)("div",_,[e[13]||(e[13]=(0,s.Lk)("label",null,"开始时间:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"datetime-local","onUpdate:modelValue":e[7]||(e[7]=t=>r.formData.startDate=t),readonly:r.viewingActivity,required:""},null,8,I),[[a.Jo,r.formData.startDate]])]),(0,s.Lk)("div",F,[e[14]||(e[14]=(0,s.Lk)("label",null,"结束时间:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"datetime-local","onUpdate:modelValue":e[8]||(e[8]=t=>r.formData.endDate=t),readonly:r.viewingActivity,required:""},null,8,E),[[a.Jo,r.formData.endDate]])]),r.viewingActivity?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",N,(0,v.v_)(r.editingActivity?"更新":"创建"),1))],32))])])):(0,s.Q3)("",!0)])}var U=i(4335),Q=i(5093),Y=i.n(Q);const q={data(){return{activities:[],searchQuery:"",currentPage:1,itemsPerPage:5,showCreateForm:!1,editingActivity:null,viewingActivity:!1,formData:{activityName:"",activityDesc:"",startDate:"",endDate:""}}},computed:{filteredActivities(){const t=this.searchQuery.trim().toLowerCase();return this.activities.filter((e=>e.activityName.toLowerCase().includes(t)))},paginatedActivities(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredActivities.slice(t,e)},totalPages(){return Math.ceil(this.filteredActivities.length/this.itemsPerPage)}},methods:{async fetchActivities(){try{const t=await U.A.get("/api/activity/all");this.activities=t.data}catch(t){console.error("加载活动列表失败：",t)}},viewActivity(t){this.viewingActivity=!0,this.formData={activityName:t.activityName,activityDesc:t.activityDesc,startDate:Y()(t.startDate).format("YYYY-MM-DDTHH:mm"),endDate:Y()(t.endDate).format("YYYY-MM-DDTHH:mm")}},editActivity(t){this.editingActivity=t,this.formData={activityName:t.activityName,activityDesc:t.activityDesc,startDate:Y()(t.startDate).format("YYYY-MM-DDTHH:mm"),endDate:Y()(t.endDate).format("YYYY-MM-DDTHH:mm")},this.showCreateForm=!0},async deleteActivity(t){if(confirm("确定要删除这个活动吗？"))try{await U.A.delete(`/api/activity/${t}`),this.activities=this.activities.filter((e=>e.activityId!==t))}catch(e){console.error("删除活动失败：",e)}},async submitForm(){try{if(this.editingActivity){const t=await U.A.put(`/api/activity/${this.editingActivity.activityId}`,this.formData),e=this.activities.findIndex((t=>t.activityId===this.editingActivity.activityId));this.activities.splice(e,1,t.data)}else{const t=await U.A.post("/api/activity/create",this.formData);this.activities.push(t.data)}this.closeForm()}catch(t){console.error("保存活动失败：",t)}},closeForm(){this.showCreateForm=!1,this.editingActivity=null,this.viewingActivity=!1,this.formData={activityName:"",activityDesc:"",startDate:"",endDate:""}},formatDate(t){return Y()(t).format("YYYY-MM-DD")}},mounted(){this.fetchActivities()}},M=(0,c.A)(q,[["render",X],["__scopeId","data-v-291021d6"]]),W=M,x={class:"activity-management"},O={class:"action-bar"},J={class:"activity-list-container"},$={class:"activity-table"},T=["onClick"],H=["onClick"],K=["onClick"],S={class:"pagination"},B=["disabled"],R=["disabled"],G={key:0,class:"modal"},Z={class:"modal-content"},tt={key:1,class:"modal"},et={class:"modal-content"},it={class:"form-group"},at=["value"],st={class:"form-group"},lt=["value"],rt={class:"form-group"},nt=["onUpdate:modelValue"],ct=["onUpdate:modelValue"],ot=["onClick"],ut={type:"submit",class:"btn btn-submit"};function dt(t,e,i,l,r,n){return(0,s.uX)(),(0,s.CE)("div",x,[e[23]||(e[23]=(0,s.Lk)("h1",null,"活动奖品关系管理",-1)),(0,s.Lk)("div",O,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.searchQuery=t),placeholder:"搜索活动名称...",class:"search-input"},null,512),[[a.Jo,r.searchQuery]]),(0,s.Lk)("button",{class:"btn btn-create",onClick:e[1]||(e[1]=(...t)=>n.createNewBinding&&n.createNewBinding(...t))},"创建新的绑定关系")]),(0,s.Lk)("div",J,[(0,s.Lk)("table",$,[e[10]||(e[10]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"活动名称"),(0,s.Lk)("th",null,"描述"),(0,s.Lk)("th",null,"开始日期"),(0,s.Lk)("th",null,"结束日期"),(0,s.Lk)("th",null,"操作")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.paginatedActivities,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.activityId},[(0,s.Lk)("td",null,(0,v.v_)(t.activityName),1),(0,s.Lk)("td",null,(0,v.v_)(t.activityDesc),1),(0,s.Lk)("td",null,(0,v.v_)(n.formatDate(t.startDate)),1),(0,s.Lk)("td",null,(0,v.v_)(n.formatDate(t.endDate)),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-view",onClick:e=>n.viewActivity(t.activityId)},"查看",8,T),(0,s.Lk)("button",{class:"btn btn-edit",onClick:e=>n.editActivity(t)},"编辑",8,H),(0,s.Lk)("button",{class:"btn btn-delete",onClick:e=>n.deleteActivity(t.activityId)},"删除",8,K)])])))),128))])]),(0,s.Lk)("div",S,[(0,s.Lk)("button",{disabled:1===r.currentPage,onClick:e[2]||(e[2]=t=>r.currentPage--),class:"btn btn-pagination"},"上一页",8,B),(0,s.Lk)("span",null,"第 "+(0,v.v_)(r.currentPage)+" 页 / 共 "+(0,v.v_)(n.totalPages)+" 页",1),(0,s.Lk)("button",{disabled:r.currentPage===n.totalPages,onClick:e[3]||(e[3]=t=>r.currentPage++),class:"btn btn-pagination"},"下一页",8,R)])]),r.selectedActivity&&!r.showCreateForm?((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("div",Z,[(0,s.Lk)("span",{class:"close",onClick:e[4]||(e[4]=t=>r.selectedActivity=null)},"×"),e[15]||(e[15]=(0,s.Lk)("h2",null,"活动奖品关系",-1)),(0,s.Lk)("p",null,[e[11]||(e[11]=(0,s.Lk)("strong",null,"活动名称:",-1)),(0,s.eW)(" "+(0,v.v_)(r.selectedActivity.activityName),1)]),(0,s.Lk)("p",null,[e[12]||(e[12]=(0,s.Lk)("strong",null,"描述:",-1)),(0,s.eW)(" "+(0,v.v_)(r.selectedActivity.activityDesc),1)]),(0,s.Lk)("p",null,[e[13]||(e[13]=(0,s.Lk)("strong",null,"开始日期:",-1)),(0,s.eW)(" "+(0,v.v_)(n.formatDate(r.selectedActivity.startDate)),1)]),(0,s.Lk)("p",null,[e[14]||(e[14]=(0,s.Lk)("strong",null,"结束日期:",-1)),(0,s.eW)(" "+(0,v.v_)(n.formatDate(r.selectedActivity.endDate)),1)]),e[16]||(e[16]=(0,s.Lk)("h3",null,"奖品列表",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.selectedActivity.prizes,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.prizeId},(0,v.v_)(t.prizeName)+" | 概率: "+(0,v.v_)(t.probability)+"% | 库存: "+(0,v.v_)(t.quantity),1)))),128))])])])):(0,s.Q3)("",!0),r.showCreateForm?((0,s.uX)(),(0,s.CE)("div",tt,[(0,s.Lk)("div",et,[(0,s.Lk)("span",{class:"close",onClick:e[5]||(e[5]=(...t)=>n.closeForm&&n.closeForm(...t))},"×"),(0,s.Lk)("h2",null,(0,v.v_)(r.editingActivity?"编辑活动奖品关系":"创建活动奖品关系"),1),(0,s.Lk)("form",{onSubmit:e[9]||(e[9]=(0,a.D$)(((...t)=>n.submitForm&&n.submitForm(...t)),["prevent"]))},[(0,s.Lk)("div",it,[e[17]||(e[17]=(0,s.Lk)("label",null,"选择活动:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.selectedActivityId=t),required:""},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.availableActivities,(t=>((0,s.uX)(),(0,s.CE)("option",{key:t.activityId,value:t.activityId},(0,v.v_)(t.activityName),9,at)))),128))],512),[[a.u1,r.selectedActivityId]])]),(0,s.Lk)("div",st,[e[18]||(e[18]=(0,s.Lk)("label",null,"可用奖品:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>r.selectedPrizeId=t)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.availablePrizes,(t=>((0,s.uX)(),(0,s.CE)("option",{key:t.prizeId,value:t.prizeId},(0,v.v_)(t.prizeName),9,lt)))),128))],512),[[a.u1,r.selectedPrizeId]]),(0,s.Lk)("button",{type:"button",onClick:e[8]||(e[8]=(...t)=>n.addPrize&&n.addPrize(...t))},"添加奖品")]),(0,s.Lk)("div",rt,[e[22]||(e[22]=(0,s.Lk)("label",null,"奖品列表:",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.formData.prizes,((t,i)=>((0,s.uX)(),(0,s.CE)("div",{key:i,class:"prize-item"},[e[19]||(e[19]=(0,s.Lk)("label",null,"奖品名称:",-1)),(0,s.Lk)("span",null,(0,v.v_)(t.prizeName),1),e[20]||(e[20]=(0,s.Lk)("label",null," 概率:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":e=>t.probability=e,placeholder:"概率",min:"0",max:"1",step:"0.00001",required:"",style:{width:"80px"}},null,8,nt),[[a.Jo,t.probability]]),e[21]||(e[21]=(0,s.Lk)("label",null," 库存:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":e=>t.quantity=e,placeholder:"库存",required:"",style:{width:"80px"}},null,8,ct),[[a.Jo,t.quantity]]),(0,s.Lk)("button",{type:"button",onClick:t=>n.removePrize(i)},"删除",8,ot)])))),128))]),(0,s.Lk)("button",ut,(0,v.v_)(r.editingActivity?"更新":"创建"),1)],32)])])):(0,s.Q3)("",!0)])}const vt={data(){return{activities:[],availableActivities:[],availablePrizes:[],selectedActivityId:null,selectedPrizeId:null,selectedActivity:null,showCreateForm:!1,editingActivity:null,formData:{prizes:[]},searchQuery:"",currentPage:1,itemsPerPage:10}},computed:{filteredActivities(){const t=this.searchQuery.trim().toLowerCase();return this.activities.filter((e=>e.activityName&&e.activityName.toLowerCase().includes(t)))},paginatedActivities(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredActivities.slice(t,e)},totalPages(){return Math.ceil(this.filteredActivities.length/this.itemsPerPage)}},methods:{async fetchAvailableActivities(){try{const t=await U.A.get("/api/activity/all");this.availableActivities=t.data}catch(t){console.error("加载可用活动列表失败：",t)}},async fetchAvailablePrizes(){try{const t=await U.A.get("/api/prize/available");this.availablePrizes=t.data}catch(t){console.error("加载可用奖品列表失败：",t)}},createNewBinding(){this.showCreateForm=!0},addPrize(){const t=this.availablePrizes.find((t=>t.prizeId===this.selectedPrizeId));t&&this.formData.prizes.push({prizeId:t.prizeId,prizeName:t.prizeName,probability:0,quantity:0})},removePrize(t){this.formData.prizes.splice(t,1)},async fetchActivities(){try{const t=await U.A.get("/api/activity-prize-relationship/all");this.activities=t.data}catch(t){console.error("获取活动列表失败：",t)}},async viewActivity(t){try{const e=await U.A.get(`/api/activity-prize-relationship/${t}`);this.selectedActivity=e.data}catch(e){console.error("获取活动详情失败：",e)}},async editActivity(t){try{const e=await U.A.get(`/api/activity-prize-relationship/${t.activityId}/details`),i=e.data;this.editingActivity=t,this.selectedActivityId=t.activityId,this.formData.prizes=i.prizes||[],await this.fetchAvailablePrizes(),this.showCreateForm=!0}catch(e){console.error("编辑活动时加载活动详情失败：",e)}},async deleteActivity(t){if(confirm("确定要删除这个活动吗？"))try{await U.A.delete(`/api/activity-prize-relationship/${t}`),this.activities=this.activities.filter((e=>e.activityId!==t))}catch(e){console.error("删除活动失败：",e)}},async submitForm(){try{const t={activityId:this.selectedActivityId,prizes:this.formData.prizes.map((t=>({prizeId:t.prizeId,probability:t.probability,quantity:t.quantity})))};this.editingActivity?await U.A.put(`/api/activity-prize-relationship/${this.editingActivity.activityId}`,t):await U.A.post("/api/activity-prize-relationship/create",t),this.closeForm(),await this.fetchActivities()}catch(t){console.error("保存活动奖品关系失败：",t)}},closeForm(){this.showCreateForm=!1,this.editingActivity=null,this.formData.prizes=[],this.selectedActivityId=null},formatDate(t){return Y()(t).format("YYYY-MM-DD")}},mounted(){this.fetchActivities(),this.fetchAvailableActivities(),this.fetchAvailablePrizes()}},mt=(0,c.A)(vt,[["render",dt],["__scopeId","data-v-2ffddf11"]]),pt=mt,ht={class:"cache-management"},kt={class:"actions"},yt={class:"cache-list"},bt={class:"cache-info"},Lt={class:"cache-name"},ft={class:"cache-details"};function gt(t,e,i,a,l,r){return(0,s.uX)(),(0,s.CE)("div",ht,[e[2]||(e[2]=(0,s.Lk)("h1",null,"缓存管理",-1)),(0,s.Lk)("div",kt,[(0,s.Lk)("button",{class:"btn btn-cache",onClick:e[0]||(e[0]=(...t)=>r.cachePrizes&&r.cachePrizes(...t))},"缓存奖品信息"),(0,s.Lk)("button",{class:"btn btn-clear",onClick:e[1]||(e[1]=(...t)=>r.clearCache&&r.clearCache(...t))},"清除缓存")]),(0,s.Lk)("ul",yt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.cachedPrizes,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.id,class:"cache-item"},[(0,s.Lk)("div",bt,[(0,s.Lk)("span",Lt,(0,v.v_)(t.name),1),(0,s.Lk)("span",ft,"概率: "+(0,v.v_)(t.probability)+"% | 库存: "+(0,v.v_)(t.quantity),1)])])))),128))])])}const zt={data(){return{cachedPrizes:[]}},methods:{async cachePrizes(){try{await U.A.post("/api/activity-prizes/redis/1/cache"),alert("奖品信息已缓存"),this.fetchCachedPrizes()}catch(t){console.error("缓存奖品信息失败：",t)}},async fetchCachedPrizes(){try{const t=await U.A.get("/api/activity-prizes/redis/1/cache");this.cachedPrizes=t.data}catch(t){console.error("加载缓存奖品数据失败：",t)}},async clearCache(){try{await U.A.delete("/api/activity-prizes/redis/1/cache"),alert("缓存已清除"),this.cachedPrizes=[]}catch(t){console.error("清除缓存失败：",t)}}},mounted(){this.fetchCachedPrizes()}},jt=(0,c.A)(zt,[["render",gt],["__scopeId","data-v-ff33dd92"]]),Dt=jt,Pt={class:"prize-management"},At={class:"action-bar"},Ct={class:"prize-list-container"},wt={class:"prize-table"},_t=["onClick"],It=["onClick"],Ft=["onClick"],Et={class:"pagination"},Nt=["disabled"],Vt=["disabled"],Xt={key:0,class:"modal"},Ut={class:"modal-content"},Qt={key:1,class:"modal"},Yt={class:"modal-content"},qt={class:"form-group"},Mt={class:"form-group"},Wt={class:"form-group"},xt={class:"form-group"},Ot={class:"form-group"},Jt={class:"form-group"},$t={class:"form-group"},Tt={type:"submit",class:"btn btn-submit"};function Ht(t,e,i,l,r,n){return(0,s.uX)(),(0,s.CE)("div",Pt,[e[31]||(e[31]=(0,s.Lk)("h1",null,"奖品管理",-1)),(0,s.Lk)("div",At,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.searchQuery=t),placeholder:"搜索奖品名称...",class:"search-input"},null,512),[[a.Jo,r.searchQuery]]),(0,s.Lk)("button",{class:"btn btn-create",onClick:e[1]||(e[1]=t=>r.showCreateForm=!0)},"创建新奖品")]),(0,s.Lk)("div",Ct,[(0,s.Lk)("table",wt,[e[14]||(e[14]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"奖品名称"),(0,s.Lk)("th",null,"描述"),(0,s.Lk)("th",null,"图片链接"),(0,s.Lk)("th",null,"类别"),(0,s.Lk)("th",null,"价值"),(0,s.Lk)("th",null,"库存"),(0,s.Lk)("th",null,"是否激活"),(0,s.Lk)("th",null,"操作")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.paginatedPrizes,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.prizeId},[(0,s.Lk)("td",null,(0,v.v_)(t.prizeName),1),(0,s.Lk)("td",null,(0,v.v_)(t.prizeDesc),1),(0,s.Lk)("td",null,(0,v.v_)(t.prizeImageUrl),1),(0,s.Lk)("td",null,(0,v.v_)(t.prizeCategory),1),(0,s.Lk)("td",null,(0,v.v_)(t.prizeValue),1),(0,s.Lk)("td",null,(0,v.v_)(t.stockQuantity),1),(0,s.Lk)("td",null,(0,v.v_)(t.isActive?"是":"否"),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-view",onClick:e=>n.viewPrize(t)},"查看",8,_t),(0,s.Lk)("button",{class:"btn btn-edit",onClick:e=>n.editPrize(t)},"编辑",8,It),(0,s.Lk)("button",{class:"btn btn-delete",onClick:e=>n.deletePrize(t.prizeId)},"删除",8,Ft)])])))),128))])]),(0,s.Lk)("div",Et,[(0,s.Lk)("button",{disabled:1===r.currentPage,onClick:e[2]||(e[2]=t=>r.currentPage--),class:"btn btn-pagination"},"上一页",8,Nt),(0,s.Lk)("span",null,"第 "+(0,v.v_)(r.currentPage)+" 页 / 共 "+(0,v.v_)(n.totalPages)+" 页",1),(0,s.Lk)("button",{disabled:r.currentPage===n.totalPages,onClick:e[3]||(e[3]=t=>r.currentPage++),class:"btn btn-pagination"},"下一页",8,Vt)])]),r.viewingPrize?((0,s.uX)(),(0,s.CE)("div",Xt,[(0,s.Lk)("div",Ut,[(0,s.Lk)("span",{class:"close",onClick:e[4]||(e[4]=(...t)=>n.closeView&&n.closeView(...t))},"×"),e[22]||(e[22]=(0,s.Lk)("h2",null,"奖品详情",-1)),(0,s.Lk)("p",null,[e[15]||(e[15]=(0,s.Lk)("strong",null,"奖品名称:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.prizeName),1)]),(0,s.Lk)("p",null,[e[16]||(e[16]=(0,s.Lk)("strong",null,"描述:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.prizeDesc),1)]),(0,s.Lk)("p",null,[e[17]||(e[17]=(0,s.Lk)("strong",null,"图片链接:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.prizeImageUrl),1)]),(0,s.Lk)("p",null,[e[18]||(e[18]=(0,s.Lk)("strong",null,"类别:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.prizeCategory),1)]),(0,s.Lk)("p",null,[e[19]||(e[19]=(0,s.Lk)("strong",null,"价值:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.prizeValue),1)]),(0,s.Lk)("p",null,[e[20]||(e[20]=(0,s.Lk)("strong",null,"库存:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.stockQuantity),1)]),(0,s.Lk)("p",null,[e[21]||(e[21]=(0,s.Lk)("strong",null,"是否激活:",-1)),(0,s.eW)(" "+(0,v.v_)(r.formData.isActive?"是":"否"),1)])])])):(0,s.Q3)("",!0),r.showCreateForm||r.editingPrize?((0,s.uX)(),(0,s.CE)("div",Qt,[(0,s.Lk)("div",Yt,[(0,s.Lk)("span",{class:"close",onClick:e[5]||(e[5]=(...t)=>n.closeForm&&n.closeForm(...t))},"×"),(0,s.Lk)("h2",null,(0,v.v_)(r.editingPrize?"编辑奖品":"创建新奖品"),1),(0,s.Lk)("form",{onSubmit:e[13]||(e[13]=(0,a.D$)(((...t)=>n.submitForm&&n.submitForm(...t)),["prevent"]))},[(0,s.Lk)("div",qt,[e[23]||(e[23]=(0,s.Lk)("label",null,"奖品名称:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.formData.prizeName=t),required:""},null,512),[[a.Jo,r.formData.prizeName]])]),(0,s.Lk)("div",Mt,[e[24]||(e[24]=(0,s.Lk)("label",null,"描述:",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>r.formData.prizeDesc=t),required:""},null,512),[[a.Jo,r.formData.prizeDesc]])]),(0,s.Lk)("div",Wt,[e[25]||(e[25]=(0,s.Lk)("label",null,"图片链接:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>r.formData.prizeImageUrl=t)},null,512),[[a.Jo,r.formData.prizeImageUrl]])]),(0,s.Lk)("div",xt,[e[26]||(e[26]=(0,s.Lk)("label",null,"类别:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>r.formData.prizeCategory=t)},null,512),[[a.Jo,r.formData.prizeCategory]])]),(0,s.Lk)("div",Ot,[e[27]||(e[27]=(0,s.Lk)("label",null,"价值:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=t=>r.formData.prizeValue=t)},null,512),[[a.Jo,r.formData.prizeValue]])]),(0,s.Lk)("div",Jt,[e[28]||(e[28]=(0,s.Lk)("label",null,"库存:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=t=>r.formData.stockQuantity=t),required:""},null,512),[[a.Jo,r.formData.stockQuantity]])]),(0,s.Lk)("div",$t,[e[30]||(e[30]=(0,s.Lk)("label",null,"是否激活:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>r.formData.isActive=t)},e[29]||(e[29]=[(0,s.Lk)("option",{value:!0},"是",-1),(0,s.Lk)("option",{value:!1},"否",-1)]),512),[[a.u1,r.formData.isActive]])]),(0,s.Lk)("button",Tt,(0,v.v_)(r.editingPrize?"更新":"创建"),1)],32)])])):(0,s.Q3)("",!0)])}const Kt={data(){return{prizes:[],searchQuery:"",currentPage:1,itemsPerPage:10,showCreateForm:!1,editingPrize:null,viewingPrize:!1,formData:{prizeName:"",prizeDesc:"",prizeImageUrl:"",prizeCategory:"",prizeValue:0,stockQuantity:0,isActive:!0}}},computed:{filteredPrizes(){const t=this.searchQuery.trim().toLowerCase();return this.prizes.filter((e=>e.prizeName.toLowerCase().includes(t)))},paginatedPrizes(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredPrizes.slice(t,e)},totalPages(){return Math.ceil(this.filteredPrizes.length/this.itemsPerPage)}},methods:{async fetchPrizes(){try{const t=await U.A.get("/api/prize/all");this.prizes=t.data}catch(t){console.error("加载奖品列表失败：",t)}},viewPrize(t){this.viewingPrize=!0,this.formData={...t}},editPrize(t){this.editingPrize=t,this.formData={...t},this.showCreateForm=!0},async deletePrize(t){if(confirm("确定要删除这个奖品吗？"))try{await U.A.delete(`/api/prize/${t}`),this.prizes=this.prizes.filter((e=>e.prizeId!==t))}catch(e){console.error("删除奖品失败：",e)}},async submitForm(){try{if(this.editingPrize){const t=await U.A.put(`/api/prize/${this.editingPrize.prizeId}`,this.formData),e=this.prizes.findIndex((t=>t.prizeId===this.editingPrize.prizeId));this.prizes.splice(e,1,t.data)}else{const t=await U.A.post("/api/prize/create",this.formData);this.prizes.push(t.data)}this.closeForm()}catch(t){console.error("保存奖品失败：",t)}},closeForm(){this.showCreateForm=!1,this.editingPrize=null,this.formData={prizeName:"",prizeDesc:"",prizeImageUrl:"",prizeCategory:"",prizeValue:0,stockQuantity:0,isActive:!0}},closeView(){this.viewingPrize=!1}},mounted(){this.fetchPrizes()}},St=(0,c.A)(Kt,[["render",Ht],["__scopeId","data-v-8d44fa0e"]]),Bt=St,Rt=[{path:"/activity",component:W},{path:"/prizes",component:Bt},{path:"/cache",component:Dt},{path:"/activityPrizeRelationship",component:pt}],Gt=(0,d.aE)({history:(0,d.LA)(),routes:Rt}),Zt=Gt,te=(0,a.Ef)(u);te.use(Zt),te.mount("#app")}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var l=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}i.m=t,(()=>{var t=[];i.O=(e,a,s,l)=>{if(!a){var r=1/0;for(u=0;u<t.length;u++){for(var[a,s,l]=t[u],n=!0,c=0;c<a.length;c++)(!1&l||r>=l)&&Object.keys(i.O).every((t=>i.O[t](a[c])))?a.splice(c--,1):(n=!1,l<r&&(r=l));if(n){t.splice(u--,1);var o=s();void 0!==o&&(e=o)}}return e}l=l||0;for(var u=t.length;u>0&&t[u-1][2]>l;u--)t[u]=t[u-1];t[u]=[a,s,l]}})(),(()=>{i.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return i.d(e,{a:e}),e}})(),(()=>{i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{i.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t)})(),(()=>{var t={524:0};i.O.j=e=>0===t[e];var e=(e,a)=>{var s,l,[r,n,c]=a,o=0;if(r.some((e=>0!==t[e]))){for(s in n)i.o(n,s)&&(i.m[s]=n[s]);if(c)var u=c(i)}for(e&&e(a);o<r.length;o++)l=r[o],i.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return i.O(u)},a=self["webpackChunklottery_frontend"]=self["webpackChunklottery_frontend"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=i.O(void 0,[504],(()=>i(8220)));a=i.O(a)})();
//# sourceMappingURL=app.d162f8ab.js.map